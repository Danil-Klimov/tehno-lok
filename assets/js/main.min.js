"use strict";let $=jQuery.noConflict();$(document).ready(function(){$(".burger__button").on("click",function(){$(".burger__menu").fadeToggle().toggleClass("active")}),$(".burger__menu").on("mouseup",function(e){const t=$(".burger__nav");t.is(e.target)||0!==t.has(e.target).length||$(this).fadeToggle().toggleClass("active")}),$(window).scroll(function(){50<=$(window).scrollTop()?$(".header").addClass("scroll"):$(".header").removeClass("scroll")});new Swiper(".features__slider",{loop:!1,centerInsufficientSlides:!0,watchOverflow:!0,navigation:{nextEl:".features__next",prevEl:".features__prev"},breakpoints:{575:{slidesPerView:3},768:{slidesPerView:4},992:{slidesPerView:5}}}),new Swiper(".our-projects__slider",{loop:!1,slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:".our-projects__next",prevEl:".our-projects__prev"}});function t(){$(".our-projects__img").each(function(){var e=new Swiper(this.querySelector(".our-projects__img-nav"),{loop:!1,slidesPerView:4,watchSlidesProgress:!0,spaceBetween:5,centerInsufficientSlides:!0});new Swiper(this.querySelector(".our-projects__img-slider-w-nav"),{loop:!1,slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:this.querySelector(".arrow_next"),prevEl:this.querySelector(".arrow_prev")},thumbs:{swiper:e}})})}$(".our-projects__img-slider").each(function(){new Swiper(this,{loop:!1,slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:this.querySelector(".arrow_next"),prevEl:this.querySelector(".arrow_prev")}})}),t(),$(".news__slider").each(function(){new Swiper(this,{loop:!1,spaceBetween:30,centerInsufficientSlides:!0,watchOverflow:!0,navigation:{nextEl:this.parentElement.querySelector(".news__next"),prevEl:this.parentElement.querySelector(".news__prev")},breakpoints:{575:{slidesPerView:2},992:{slidesPerView:3}}})});new Swiper(".reviews__slider",{loop:!1,spaceBetween:0,centerInsufficientSlides:!0,watchOverflow:!0,navigation:{nextEl:".reviews__next",prevEl:".reviews__prev"},breakpoints:{575:{slidesPerView:2},769:{slidesPerView:"auto",spaceBetween:34},992:{slidesPerView:"auto",spaceBetween:34},1200:{slidesPerView:"auto",spaceBetween:19}}}),new Swiper(".gallery",{loop:!0,slidesPerView:"auto",centerInsufficientSlides:!0,watchOverflow:!0,autoplay:!0,centeredSlides:!0,freeMode:!0}),new Swiper(".posts__slider",{loop:!1,centerInsufficientSlides:!0,watchOverflow:!0,navigation:{nextEl:".posts__next",prevEl:".posts__prev"},breakpoints:{575:{slidesPerView:2,spaceBetween:10},992:{slidesPerView:3,spaceBetween:90},1200:{slidesPerView:3,spaceBetween:80}}}),$('input[type="tel"]').on("focus",function(){$(this).mask("+7(000)000-00-00"),0===$(this).val().length&&$(this).val("+7(")}),new Swiper(".numbers__slider",{loop:!1,centerInsufficientSlides:!0,watchOverflow:!0,navigation:{nextEl:".numbers__next",prevEl:".numbers__prev"},breakpoints:{575:{slidesPerView:2},768:{slidesPerView:5},992:{slidesPerView:6,spaceBetween:30}}});$(".select").on("click",function(){$(this).toggleClass("active")}).on("blur",function(){$(this).removeClass("active")});var e=$(".projects-menu__slider").data("init");let i;$(".projects-menu__slider").each(function(){i=new Swiper(this,{direction:"horizontal",loop:!1,slidesPerView:3,navigation:{nextEl:this.nextElementSibling,prevEl:this.previousElementSibling},breakpoints:{768:{slidesPerView:4},992:{slidesPerView:6}}})}),i&&i.initialized&&(i.slideTo(e),i.slides[e].classList.add("active"));var n=document.querySelectorAll(".video");for(let e=0;e<n.length;e++)!function(t){const i=t.querySelector(".video__link");if(i){const n=t.querySelector(".video__button"),s=function(e){const t=e.href,i=t.match(/[a-zA-Z0-9_-]+$/);return i[0]}(i);t.addEventListener("click",()=>{var e=function(e){const t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("src",function(e){return"https://www.youtube.com/embed/"+e+"?rel=0&showinfo=0&autoplay=1"}(e)),t.classList.add("video__media"),t}(s);i.remove(),n.remove(),t.appendChild(e)}),i.removeAttribute("href"),t.classList.add("video_enabled")}}(n[e]);new Swiper(".interview__slider",{loop:!1,slidesPerView:1,navigation:{nextEl:".interview__next",prevEl:".interview__prev"}});$(window).on("load resize",function(){992<$(window).width()?$(".faq__answer").mCustomScrollbar():$(".faq__answer").mCustomScrollbar("destroy")}),$(".faq__question").on("click",function(){const e=$(this).siblings(".faq__answer");$(this).addClass("active"),$(".faq__question").not(this).removeClass("active"),992<$(window).width()?($(".faq__answer").not(e).fadeOut(),e.fadeIn()):($(".faq__answer").not(e).slideUp(),e.slideDown())});let s={init:function(){this.bindUIfunctions(),this.pageLoadCorrectTab()},bindUIfunctions:function(){$(document).on("click",".team__tab:not('.active')",function(e){s.changeTab(this.hash),e.preventDefault()}).on("click",".team__tab.active",function(e){s.toggleMobileMenu(e,this),e.preventDefault()})},changeTab:function(e){let t=$("[href='"+e+"']"),i=$(e);t.addClass("active").siblings().removeClass("active"),i.addClass("active").siblings(".team__container").removeClass("active"),r(),window.history.replaceState("","",e),t.closest(".team__tabs").removeClass("open")},pageLoadCorrectTab:function(){this.changeTab(document.location.hash)},toggleMobileMenu:function(e,t){$(t).closest(".team__tabs").toggleClass("open")}};function r(){$(".team__slider").each(function(){new Swiper(this,{loop:!1,centerInsufficientSlides:!0,watchOverflow:!0,navigation:{nextEl:this.parentElement.querySelector(".arrow_next"),prevEl:this.parentElement.querySelector(".arrow_prev")},breakpoints:{575:{slidesPerView:2},768:{slidesPerView:3},1200:{slidesPerView:4}}})})}s.init(),r();new Swiper(".office__slider",{loop:!1,slidesPerView:1,centerInsufficientSlides:!0,watchOverflow:!0,freeMode:!0,autoplay:{delay:4e3},speed:1e3});$("form[data-name]").on("submit",function(e){e.preventDefault();const t=$(this);e=$("#file");let i=new FormData(t.get(0));t.data("name")&&(i.append("form_name",t.data("name")),e&&i.append("post_id",e),$.ajax({type:"POST",url:window.wp_data.ajax_url+"?action=send_mail",data:i,cache:!1,processData:!1,contentType:!1,success:function(){t.trigger("reset"),$(".file-name").html(""),$.fancybox.open({src:"<div><p>Спасибо за заявку!</p><p>С Вами свяжутся в ближайшее время.</p></div>",type:"inline",modal:!0}),setTimeout(function(){$.fancybox.close(!0)},2e3)},error:function(e,t,i){console.log(e,t,i)}}))}),$("#filter .select").on("change",function(){const e=$(this);return $.ajax({type:"POST",data:e.parent().serialize(),dataType:"json",url:window.wp_data.ajax_url+"?action=ajax_filter",beforeSend:function(e){},success:function(e){current_page=1,posts=e.posts,max_pages=e.max_page,$("#projects").html(e.content),e.max_page<2?$(".posts__button").hide():$(".posts__button").show(),t()}}),!1}),$(".posts__button").click(function(){$(this).text("Загружаю...");var e={action:"loadmore",query:posts,page:current_page,parent:parent};$.ajax({url:ajaxurl,data:e,type:"POST",success:function(e){e?($(".posts__button").text("ПОКАЗАТЬ ЕЩЕ"),$("#projects").append(e),++current_page==max_pages&&$(".posts__button").remove()):$(".posts__button").remove()}})})});